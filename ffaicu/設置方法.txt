┏━━━━━━━━━━━┓
┃FFA いく改の設置方法  ┃
┗━━━━━━━━━━━┛

---まずやる事---

1.まず、ファイルがちゃんと全部あるか確かめる。ただし、こちらには画像は入っていません。画像の追加は後ほど行います。

2.dataフォルダ内にあるffadventure.iniで環境設定。※通常はこのままでOK。画像設定だけは後した方が楽なようにしてあります。

3.※admin.cgiでパスワードの変更を行う。※必ず設定を行って下さい！

4.ＣＧＩとＨＴＭＬのサーバーの起動の仕方が違う場合は、index.htmlの中にある"./others.cgi"の部分をhttp://www.ffa.com/ffaicu/others.cgiのようにＦＦＡのothers.cgiまでのフルパスで入力してください。

---次にやる事---

5.FFFTP等で、サーバーに転送。※imagesは、バイナリモードで。

6.パーミッションの設定。※下記参照。
※要変更※と書かれたファイルのパーミッションは必ず変更して下さい。
正常に動作しない可能性があります。

ffaicu(777or755)[FFAの内容が詰まっているフォルダ]
	■ 動作用CGI(全て755)※要変更※
		admin.cgi [管理]
		bank.cgi[銀行]
		battle.cgi[チャンプ戦]
		chara_make.cgi[キャラ作成]
		ffadventure.cgi[ステータス画面表示]
		legend.cgi[レジェンドプレイス]
		login.cgi[キャラログイン]
		monster.cgi[モンスター戦]
		others.cgi[トップ表示]
		passchange.cgi[パスワード変更]
		post_message.cgi[郵便局]
		rank.cgi[総合ランキング出力]
		select_battle.cgi[好きなキャラ挑戦]
		shop.cgi[宿屋]
		shop_acs.cgi[装飾品店]
		shop_def.cgi[防具屋]
		shop_item.cgi[武器屋]
		souko.cgi[倉庫]
		sts.cgi[ステータス変更]
		system.cgi[キャラデータ詳細表示・ランキングなど]
		tac_change.cgi[戦術変更]
		tenka.cgi[天下一武道会]
		tensyoku.cgi[転職の神殿]

	■ 記録用CGI(全て666)※要変更※
		alldata.cgi[１日１回更新の全員データ]
		alltime.cgi[データ更新用時間データ]
		all_tenka.cgi[天下一武道会上位キャラデータ]
		kanrilog.cgi[管理モードログインデータ]
		save_log.cgi[削除日数経過キャラ保存用データ]
		tenka_log.cgi[天下一武道会制覇者データ]

	■ plファイル(基本644)
		battle.pl(666)[戦闘用ライブラリ]※要変更
		item.pl[アイテム装備用ライブラリ]
		jcode.pl[日本語ライブラリ]
		mbattle.pl[モンスター戦用ライブラリ]
		regist.pl[基本ライブラリ]
		sankasya.pl[参加者表示・記録ライブラリ]
		sousin.pl[送信データ表示]
		wbattle.pl(666)[対人戦用ライブラリ]※要変更

	■ 記録用フォルダ(全て777か755)※要変更※
		ban[メッセージ拒否・友達登録用保存フォルダ]
		charalog[キャラデータ保存フォルダ]
		datalog[チャンプ・全体メッセージ]
			guest.dat(666)[参加者ログ]※要変更※
			message.cgi(666)[全体メッセージ]※要変更※
			winner.cgi(666)[チャンプログ]※要変更※
		item[アイテムデータ保存フォルダ]
		loginlog[ログインログ保存フォルダ]
		lock[ロックフォルダ-ファイルの消失を防ぎます]
		message[受信メッセージ保存フォルダ]
		pass[パスワード変更ログ保存フォルダ]
		rankhtml[ランキングHTML出力先]
		souko[倉庫フォルダ]
			item[武器ログ保存フォルダ]
			def[防具ログ保存フォルダ]
			acs[装飾品ログ保存フォルダ]
		sousin[送信メッセージ保存フォルダ]
		syoku[職業履歴保存フォルダ]

	■ 動作用フォルダ(全て777か755)
		acstech[アクセサリー技]
		data[データ関連全般]
			acs(755)[アクセサリーデータ]
				中身のiniファイル全て(666)※要変更※
			def(755)[防具データ]
				中身のiniファイル全て(666)※要変更※
			item(755)[武器データ]
				中身のiniファイル全て(666)※要変更※
			tac(755)[戦術データ]
				中身のiniファイル全て(666)※要変更※
			ffadventure.ini(644)[設定用ファイル]
			syoku.ini(666)[職業用設定ファイル]※要変更※
			bossmons0.ini(644)[レジェンドプレイス1番目モンスター]
			bossmons1.ini(644)[レジェンドプレイス2番目モンスター]
			bossmons2.ini(644)[レジェンドプレイス3番目モンスター]
			bossmons3.ini(644)[レジェンドプレイス4番目モンスター]
			lowmons.ini(644)[周辺の探索・最弱モンスター]
			normalmons.ini(644)[周辺の探索・弱いモンスター]
			highmons.ini(644)[周辺の探索・強いモンスター]
			spmons.ini(644)[周辺の探索・最強モンスター]
			isekaimons.ini(644)[異世界モンスター]
		html[ヘルプなどのHTML関連]
			cgi.css(644)[スタイルシート・デザイン変更用です]
			const.js(644)[右クリック禁止用Javascript]
			ffhelp.html(644)[ヘルプファイル]
			syokugyou.html(644)[転職用職業ヘルプ]
		images[画像フォルダ]
		mons[モンスター技]
		tech[戦術]
		wacstech[チャンプアクセサリー技]
		wtech[チャンプ戦術]

	■ HTMLファイル(全て644)
		index.html[最初にアクセスするファイル]
		frame1.html[空のHTMLファイル]

	■ 後から自動的に出来るファイル(パーミッションの変更はいりませんが、FTPでアップしなおした時は666に変更して下さい)
		img_all0.html(0から順に増えます)[キャラクター画像一覧用]


	■ その他のファイル(アップロード不要)
		ログ.txt(データ配列の説明が書いてます)
		修正履歴.txt(修正履歴です)
		設置方法.txt(このファイルです)


---最後にやる事---
URL(http://www.ffa.com/ffaicu/index.htmlのように、index.htmlまでのフルパス)を打ち込んで、ちゃんと動作されるか確認。

---注意する事---

1.Internet sever errorが出る

ちゃんとアスキーモードで転送しましたか？
gifやjpg等の、画像ファイルだけバイナリモードです。


2.背景が出ない

転送したか、確認して下さい。あと、URLが合ってるか、そして当然バイナリモードで。
なお、背景は同封されておりませんので、どこかからお好きな背景画像を取ってくる必要があります。


3.他のFFAより文字が大きくて変

CSS（スタイルシートのこと）系のパーミッションを確認して下さい。
もしかして755になってませんか？CSSもそのまま。
cgi.cssは『html』というフォルダに入っております。
また、htmlサーバーとcgiサーバーが分かれているサーバーでもそのようになってしまいますので、サーバーの仕様に従ってください。


4.キャラアイコンが変、表の枠線が出ない。右クリックが使えてしまう。

よくある事です。
画像はちゃんとバイナリで転送しましたか？
×で表示される場合は、画像のURLを確認して、ffadventure.iniを見て
おかしくないか確認して下さい。
CGI専用のサーバーに分けてる場合など、環境によってはＨＴＭＬファイルは絶対パスではなくてはなりません。（htmlフォルダの中のものなどを絶対パスで指定。）
サーバーの注意事項をよく読んで設定を見直しましょう。
※補足：絶対パスとはhttp://から始まるＵＲＬの直打ちみたいなもので、相対パスとは最初から設定してある通りの./html/cgi.cssみたいな記述のことを言います。


5.新規登録が完了し、ffadventure.cgiに入ろうとするとcan't lockと出る

lockフォルダはありますか？
パーミッションは777ですよ。


※その他、ご質問があったらここのサポート掲示板に書き込んで下さい。ＦＦＡ改造のコツにて詳しい設置の手順も記載しておりますので参考にして下さったらいいと思います。

★ パーミッションについて ★
パーミッションは７５５と記載していますが、それはどんなサーバーでも動くように設定しています。パーミッションの推奨は７５５は７０１に、６４４は６００とし、ffaicuフォルダも７０１で設置することをお薦めします。（ただし、動作の保証はしません。これで動作しない場合は７０５を試していただき、最後、７５５で試されるといいかと思います。６００も同様に、６０４、６４４の順番で試すといいです。）
これは、ちまたに出回っている不正行為の対策になります。


★ iniファイル、datファイル、plファイルの扱いについて ★
iniファイル、datファイル、plファイルは純正Linuxなどではファイルとして認識されていないため、直接アクセスした場合にダウンロードされてしまうことがあります。
これを防ぐためにはあらかじめ、直接アクセスできないようにする必要があります。
.htaccessの使用出来るサーバーであれば、以下の記述部分を.htaccessというファイル名で保存し、ffaicuフォルダ内に入れて下さい。（パーミッションはそのまま(644)）
それだけで外部からのdatファイルなどへのアクセスを防ぐことができます。
-------------ここから-----------
order allow,deny
allow from all
<Files ~ "\.pl$">
  deny from all 
</Files>
<Files ~ "\.ini$">
  deny from all 
</Files>
<Files ~ "\.dat$">
  deny from all 
</Files>
-------------ここまで-----------
なお、.htaccessが使用できるとＦＦＡ内のアクセス制限を使用せずともアクセス制限を行うことができます。
allow from allの下に
deny from ○.○.○.
という記述を足すだけでＯＫです。なお、「○.○.○.」の部分にはＩＰ、もしくはホスト名を入力して下さい。
.htaccessが使用できないサーバーではパーミッションを660や640などにして頂くか（ただし、それでも動く場合のみ）、ファイル名などを変更するなどをして対策を取って下さい。

http://www.eriicu.com

#=================#
#よくある質問 #
#=================#

Ｑ、新規にキャラが作れない
Ａ、charalogフォルダとキャラログのパーミッション、位置を再確認してみて下さい。

Ｑ、アクセスできない
Ａ、最初にアクセスするのはindex.htmlです。

Ｑ、モンスターが１種類しか出現しない（同じモンスターばかり出現する）
Ａ、サーバーにインストールされているPerlのバージョンが４以下の可能性が高いです
FFAはPerlのバージョン５以上でのみ正常に動作します。 

Ｑ、テーブル内の文字色などを変更したい
Ａ、htmlフォルダ内にあるcssファイルを編集してください。
CSS(カスケードスタイルシート)で書かれています。
詳しくはとほほなどのスタイルシートについて書かれているサイトをご参照下さい。

Ｑ、職業の追加やアイテムの追加、編集を行いたい。
Ａ、管理モードにログインすれば簡単にできます。


いくら確認しても動作しない場合は新しくダウンロードして、１行目のperlの場所をお使いのサーバーに合わせ変更し、ffadventure.iniの「ffadventure.cgiまでの絶対パス」「others.cgiまでの絶対パス」を記入して、それ以外はは何も変更せずにUPして見て下さい。
その後お使いのサーバーの仕様と設置方法.txtを見ながらパーミッションの設定をし、動作確認してください。


#===========#
#データ一覧 #
#===========#
○ モンスター技表
1.防御魔法マイティガード！！！
2.白魔法ケアルガ！！！
3.黒魔法ファイガ！！！
4.黒魔法ブリザガ！！！
5.黒魔法サンダガ！！！
6.古代魔法メテオ！！！
7.重力魔法グラビガ！！！
8.黒魔法クエイク！！！
9.禁断の魔法アルテマ！！！
10.青魔法ショック・ウェーブ・パルサー！！！
11.時空魔法デジョン！！！
12.ファイア・ブレス！！！
13.白魔法ケアルガ！！！＆アルテマ
14.お金を盗む
15.暗黒魔法ドレイン！！！
16.最強魔法アポガリプス！！！
17.祝福のキス♪（えりりん専用必殺技）
18.メガフレア（バハムート専用必殺技）
19.ハァハァ（あなきん＆いく特有必殺技）
20.斬鉄剣（オーディン専用必殺技）
21.性転換
22.臭い息（モルボル専用必殺技・全能力をランダムで少し減少させる）

○ アイテムデータ（アイテム追加の際、参考にしてください）
#武器
番号<>名前<>攻撃力<>値段<>命中率補正<>
#防具
番号<>名前<>防御力<>値段<>回避率補正<>
#アクセサリー
番号<>名前<>値段<>特殊効果番号<>力<>知力<>信仰心<>生命力<>器用さ<>素早さ<>魅力<>カルマ<>命中率<>回避率<>必殺率<>

○ モンスターデータ（モンスター追加の際、参考にしてください）
名前<>経験値<>ランダム値<>基本HP<>ダメージ(ランダム)<>回避率<>技番号<>技発動率<>お金<>

